#!/bin/bash
#
# submit ESMPy profiling jobs from 32-1028 procs
#

mpirun -np 1 MOAB_eval data/ll1deg_grid.esmf.nc data/ll20x20_grid.esmf.nc > MOAB_eval1.out
python collect_mem_reports.py 1
mpirun -np 2 MOAB_eval data/ll1deg_grid.esmf.nc data/ll20x20_grid.esmf.nc > MOAB_eval2.out
python collect_mem_reports.py 2
mpirun -np 4 MOAB_eval data/ll1deg_grid.esmf.nc data/ll20x20_grid.esmf.nc > MOAB_eval4.out
python collect_mem_reports.py 4
# mpirun -np 8 MOAB_eval data/ll1deg_grid.esmf.nc data/ll20x20_grid.esmf.nc > MOAB_eval8.out
# python collect_mem_reports.py 8

# argument is how many runs of powers of two are above
python parse_moab_eval.py 3